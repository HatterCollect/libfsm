/*
 * Copyright © 2019 Jáchym Holeček <freza@circlewave.net>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *  1. Redistributions of source code must retain the above copyright notice,
 *     this list of conditions and the following disclaimer.
 *
 *  2. Redistributions in binary form must reproduce the above copyright notice,
 *     this list of conditions and the following disclaimer in the documentation
 *     and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * Shuffle tables are shared by all `btree` instantiations.
 */

#include <stdint.h>

/*
 * Generic shuffles: Extend permutation to full arity by replicating last element.
 */

const uint8_t   btree_shuffle_extend_perm[16][16] __attribute__((aligned(64))) = {
		   /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 0]     = {   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0 },
	[ 1]     = {   0,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1 },
	[ 2]     = {   0,   1,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2 },
	[ 3]     = {   0,   1,   2,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3 },

	[ 4]     = {   0,   1,   2,   3,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4 },
	[ 5]     = {   0,   1,   2,   3,   4,   5,   5,   5,   5,   5,   5,   5,   5,   5,   5,   5 },
	[ 6]     = {   0,   1,   2,   3,   4,   5,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6 },
	[ 7]     = {   0,   1,   2,   3,   4,   5,   6,   7,   7,   7,   7,   7,   7,   7,   7,   7 },

	[ 8]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   8,   8,   8,   8,   8,   8,   8 },
	[ 9]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,   9,   9,   9,   9,   9,   9 },
	[10]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  10,  10,  10,  10,  10 },
	[11]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  11,  11,  11,  11 },

	[12]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  12,  12,  12 },
	[13]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  13,  13 },
	[14]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  14 },
	[15]     = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },
};

/*
 * Leaf node shuffles: Row vector ordering.
 */

const uint8_t btree_shuffle_modify_lnode[16][2][16] __attribute__((aligned(64))) = {
	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 0][ 0] = { +15,   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 00 RP insert shuffle. 	*/
	[ 0][ 1] = {   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +0 },	/* 00 RP delete shuffle. 	*/

	[ 1][ 0] = {   0, +15,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 01 RP insert shuffle. 	*/
	[ 1][ 1] = {   0,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +1 },	/* 01 RP delete shuffle. 	*/

	[ 2][ 0] = {   0,   1, +15,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 02 RP insert shuffle. 	*/
	[ 2][ 1] = {   0,   1,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +2 },	/* 02 RP delete shuffle. 	*/

	[ 3][ 0] = {   0,   1,   2, +15,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 03 RP insert shuffle. 	*/
	[ 3][ 1] = {   0,   1,   2,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +3 },	/* 03 RP delete shuffle. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 4][ 0] = {   0,   1,   2,   3, +15,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 04 RP insert shuffle. 	*/
	[ 4][ 1] = {   0,   1,   2,   3,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +4 },	/* 04 RP delete shuffle. 	*/

	[ 5][ 0] = {   0,   1,   2,   3,   4, +15,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 05 RP insert shuffle. 	*/
	[ 5][ 1] = {   0,   1,   2,   3,   4,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +5 },	/* 05 RP delete shuffle. 	*/

	[ 6][ 0] = {   0,   1,   2,   3,   4,   5, +15,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 06 RP insert shuffle. 	*/
	[ 6][ 1] = {   0,   1,   2,   3,   4,   5,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +6 },	/* 06 RP delete shuffle. 	*/

	[ 7][ 0] = {   0,   1,   2,   3,   4,   5,   6, +15,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 07 RP insert shuffle. 	*/
	[ 7][ 1] = {   0,   1,   2,   3,   4,   5,   6,   8,   9,  10,  11,  12,  13,  14,  15,  +7 },	/* 07 RP delete shuffle. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 8][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7, +15,   8,   9,  10,  11,  12,  13,  14 },	/* 08 RP insert shuffle. 	*/
	[ 8][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   9,  10,  11,  12,  13,  14,  15,  +8 },	/* 08 RP delete shuffle. 	*/

	[ 9][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8, +15,   9,  10,  11,  12,  13,  14 },	/* 09 RP insert shuffle. 	*/
	[ 9][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,  10,  11,  12,  13,  14,  15,  +9 },	/* 09 RP delete shuffle. 	*/

	[10][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9, +15,  10,  11,  12,  13,  14 },	/* 10 RP insert shuffle. 	*/
	[10][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  11,  12,  13,  14,  15, +10 },	/* 10 RP delete shuffle. 	*/

	[11][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10, +15,  11,  12,  13,  14 },	/* 11 RP insert shuffle. 	*/
	[11][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  12,  13,  14,  15, +11 },	/* 11 RP delete shuffle. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[12][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11, +15,  12,  13,  14 },	/* 12 RP insert shuffle. 	*/
	[12][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  13,  14,  15, +12 },	/* 12 RP delete shuffle. 	*/

	[13][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12, +15,  13,  14 },	/* 13 RP insert shuffle. 	*/
	[13][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  14,  15, +13 },	/* 13 RP delete shuffle. 	*/

	[14][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13, +15,  14 },	/* 14 RP insert shuffle. 	*/
	[14][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  15, +14 },	/* 14 RP delete shuffle. 	*/

	[15][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14, +15 },	/* 15 RP insert shuffle. 	*/
	[15][ 1] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14, +15 },	/* 15 RP delete shuffle. 	*/
};

const uint8_t btree_shuffle_divide_lnode[17][2][16] __attribute__((aligned(64))) = {
	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 0][ 0] = { +15,   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 00 RP divide shuffle L. 	*/
	[ 0][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 00 RP divide shuffle R. 	*/

	[ 1][ 0] = {   0, +15,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 01 RP divide shuffle L. 	*/
	[ 1][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 01 RP divide shuffle R. 	*/

	[ 2][ 0] = {   0,   1, +15,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 02 RP divide shuffle L. 	*/
	[ 2][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 02 RP divide shuffle R. 	*/

	[ 3][ 0] = {   0,   1,   2, +15,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 03 RP divide shuffle L. 	*/
	[ 3][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 03 RP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 4][ 0] = {   0,   1,   2,   3, +15,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 04 RP divide shuffle L. 	*/
	[ 4][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 04 RP divide shuffle R. 	*/

	[ 5][ 0] = {   0,   1,   2,   3,   4, +15,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 05 RP divide shuffle L. 	*/
	[ 5][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 05 RP divide shuffle R. 	*/

	[ 6][ 0] = {   0,   1,   2,   3,   4,   5, +15,   6,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 06 RP divide shuffle L. 	*/
	[ 6][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 06 RP divide shuffle R. 	*/

	[ 7][ 0] = {   0,   1,   2,   3,   4,   5,   6, +15,   7,   8,   9,  10,  11,  12,  13,  14 },	/* 07 RP divide shuffle L. 	*/
	[ 7][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 07 RP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 8][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7, +15,   8,   9,  10,  11,  12,  13,  14 },	/* 08 RP divide shuffle L. 	*/
	[ 8][ 1] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 08 RP divide shuffle R. 	*/

	[ 9][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 09 RP divide shuffle L. 	*/
	[ 9][ 1] = {  +8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 09 RP divide shuffle R. 	*/

	[10][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 10 RP divide shuffle L. 	*/
	[10][ 1] = {   9,  +8,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 10 RP divide shuffle R. 	*/

	[11][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 11 RP divide shuffle L. 	*/
	[11][ 1] = {   9,  10,  +8,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 11 RP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[12][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 12 RP divide shuffle L. 	*/
	[12][ 1] = {   9,  10,  11,  +8,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 12 RP divide shuffle R. 	*/

	[13][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 13 RP divide shuffle L. 	*/
	[13][ 1] = {   9,  10,  11,  12,  +8,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 13 RP divide shuffle R. 	*/

	[14][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 14 RP divide shuffle L. 	*/
	[14][ 1] = {   9,  10,  11,  12,  13,  +8,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 14 RP divide shuffle R. 	*/

	[15][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 15 RP divide shuffle L. 	*/
	[15][ 1] = {   9,  10,  11,  12,  13,  14,  +8,  15,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 15 RP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[16][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },	/* 16 RP divide shuffle L. 	*/
	[16][ 1] = {   9,  10,  11,  12,  13,  14,  15,  +8,   0,   1,   2,   3,   4,   5,   6,   7 },	/* 16 RP divide shuffle R. 	*/
};

/*
 * Branch node shuffles: Simulatenous orderings of key, subtree pointer and subtree size vectors.
 */

const uint8_t btree_shuffle_modify_bnode[16][4][16] __attribute__((aligned(64))) = {
	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 0][ 0] = { 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255 },  /* 00 TP insert shuffle.	*/
	[ 0][ 1] = { 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255 },  /* 00 KP insert shuffle.	*/
	[ 0][ 2] = {   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +0 },  /* 00 TP delete shuffle.	*/
	[ 0][ 3] = { 255,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +1 },  /* 00 KP delete shuffle.	*/

	[ 1][ 0] = {   0, +15,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 01 TP insert shuffle.	*/
	[ 1][ 1] = { 255, +15,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 01 KP insert shuffle.	*/
	[ 1][ 2] = {   0,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +1 },  /* 01 TP delete shuffle.	*/
	[ 1][ 3] = { 255,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +1 },  /* 01 KP delete shuffle.	*/

	[ 2][ 0] = {   0,   1, +15,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 02 TP insert shuffle.	*/
	[ 2][ 1] = { 255,   1, +15,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 02 KP insert shuffle.	*/
	[ 2][ 2] = {   0,   1,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +2 },  /* 02 TP delete shuffle.	*/
	[ 2][ 3] = { 255,   1,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +2 },  /* 02 KP delete shuffle.	*/

	[ 3][ 0] = {   0,   1,   2, +15,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 03 TP insert shuffle.	*/
	[ 3][ 1] = { 255,   1,   2, +15,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 03 KP insert shuffle.	*/
	[ 3][ 2] = {   0,   1,   2,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +3 },  /* 03 TP delete shuffle.	*/
	[ 3][ 3] = { 255,   1,   2,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +3 },  /* 03 KP delete shuffle.	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 4][ 0] = {   0,   1,   2,   3, +15,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 04 TP insert shuffle.	*/
	[ 4][ 1] = { 255,   1,   2,   3, +15,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 04 KP insert shuffle.	*/
	[ 4][ 2] = {   0,   1,   2,   3,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +4 },  /* 04 TP delete shuffle.	*/
	[ 4][ 3] = { 255,   1,   2,   3,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +4 },  /* 04 KP delete shuffle.	*/

	[ 5][ 0] = {   0,   1,   2,   3,   4, +15,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 05 TP insert shuffle.	*/
	[ 5][ 1] = { 255,   1,   2,   3,   4, +15,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 05 KP insert shuffle.	*/
	[ 5][ 2] = {   0,   1,   2,   3,   4,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +5 },  /* 05 TP delete shuffle.	*/
	[ 5][ 3] = { 255,   1,   2,   3,   4,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +5 },  /* 05 KP delete shuffle.	*/

	[ 6][ 0] = {   0,   1,   2,   3,   4,   5, +15,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 06 TP insert shuffle.	*/
	[ 6][ 1] = { 255,   1,   2,   3,   4,   5, +15,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 06 KP insert shuffle.	*/
	[ 6][ 2] = {   0,   1,   2,   3,   4,   5,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +6 },  /* 06 TP delete shuffle.	*/
	[ 6][ 3] = { 255,   1,   2,   3,   4,   5,   7,   8,   9,  10,  11,  12,  13,  14,  15,  +6 },  /* 06 KP delete shuffle.	*/

	[ 7][ 0] = {   0,   1,   2,   3,   4,   5,   6, +15,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 07 TP insert shuffle.	*/
	[ 7][ 1] = { 255,   1,   2,   3,   4,   5,   6, +15,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 07 KP insert shuffle.	*/
	[ 7][ 2] = {   0,   1,   2,   3,   4,   5,   6,   8,   9,  10,  11,  12,  13,  14,  15,  +7 },  /* 07 TP delete shuffle.	*/
	[ 7][ 3] = { 255,   1,   2,   3,   4,   5,   6,   8,   9,  10,  11,  12,  13,  14,  15,  +7 },  /* 07 KP delete shuffle.	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 8][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7, +15,   8,   9,  10,  11,  12,  13,  14 },  /* 08 TP insert shuffle.	*/
	[ 8][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7, +15,   8,   9,  10,  11,  12,  13,  14 },  /* 08 KP insert shuffle.	*/
	[ 8][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   9,  10,  11,  12,  13,  14,  15,  +8 },  /* 08 TP delete shuffle.	*/
	[ 8][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   9,  10,  11,  12,  13,  14,  15,  +8 },  /* 08 KP delete shuffle.	*/

	[ 9][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8, +15,   9,  10,  11,  12,  13,  14 },  /* 09 TP insert shuffle.	*/
	[ 9][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8, +15,   9,  10,  11,  12,  13,  14 },  /* 09 KP insert shuffle.	*/
	[ 9][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,  10,  11,  12,  13,  14,  15,  +9 },  /* 09 TP delete shuffle.	*/
	[ 9][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,  10,  11,  12,  13,  14,  15,  +9 },  /* 09 KP delete shuffle.	*/

	[10][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9, +15,  10,  11,  12,  13,  14 },  /* 10 TP insert shuffle.	*/
	[10][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9, +15,  10,  11,  12,  13,  14 },  /* 10 KP insert shuffle.	*/
	[10][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  11,  12,  13,  14,  15, +10 },  /* 10 TP delete shuffle.	*/
	[10][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  11,  12,  13,  14,  15, +10 },  /* 10 KP delete shuffle.	*/

	[11][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10, +15,  11,  12,  13,  14 },  /* 11 TP insert shuffle.	*/
	[11][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10, +15,  11,  12,  13,  14 },  /* 11 KP insert shuffle.	*/
	[11][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  12,  13,  14,  15, +11 },  /* 11 TP delete shuffle.	*/
	[11][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  12,  13,  14,  15, +11 },  /* 11 KP delete shuffle.	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[12][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11, +15,  12,  13,  14 },  /* 12 TP insert shuffle.	*/
	[12][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11, +15,  12,  13,  14 },  /* 12 KP insert shuffle.	*/
	[12][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  13,  14,  15, +12 },  /* 12 TP delete shuffle.	*/
	[12][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  13,  14,  15, +12 },  /* 12 KP delete shuffle.	*/

	[13][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12, +15,  13,  14 },  /* 13 TP insert shuffle.	*/
	[13][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12, +15,  13,  14 },  /* 13 KP insert shuffle.	*/
	[13][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  14,  15, +13 },  /* 13 TP delete shuffle.	*/
	[13][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  14,  15, +13 },  /* 13 KP delete shuffle.	*/

	[14][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13, +15,  14 },  /* 14 TP insert shuffle.	*/
	[14][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13, +15,  14 },  /* 14 KP insert shuffle.	*/
	[14][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  15, +14 },  /* 14 TP delete shuffle.	*/
	[14][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  15, +14 },  /* 14 KP delete shuffle.	*/

	[15][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14, +15 },  /* 15 TP insert shuffle.	*/
	[15][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14, +15 },  /* 15 KP insert shuffle.	*/
	[15][ 2] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14, +15 },  /* 15 TP delete shuffle.	*/
	[15][ 3] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14, +15 },  /* 15 KP delete shuffle.	*/
};

const uint8_t btree_shuffle_divide_bnode[17][4][16] __attribute__((aligned(64))) = {
	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
	[ 0][ 0] = { 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255 },  /* 00 TP divide shuffle L.	*/
	[ 0][ 1] = { 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255 },  /* 00 KP divide shuffle L.	*/
	[ 0][ 2] = { 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255 },  /* 00 TP divide shuffle R.	*/
	[ 0][ 3] = { 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255 },  /* 00 KP divide shuffle R.	*/

        [ 1][ 0] = {   0, +15,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 01 TP divide shuffle L. 	*/
        [ 1][ 1] = { 255, +15,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 01 KP divide shuffle L. 	*/
        [ 1][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 01 TP divide shuffle R. 	*/
        [ 1][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 01 KP divide shuffle R. 	*/

        [ 2][ 0] = {   0,   1, +15,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 02 TP divide shuffle L. 	*/
        [ 2][ 1] = { 255,   1, +15,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 02 KP divide shuffle L. 	*/
        [ 2][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 02 TP divide shuffle R. 	*/
        [ 2][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 02 KP divide shuffle R. 	*/

        [ 3][ 0] = {   0,   1,   2, +15,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 03 TP divide shuffle L. 	*/
        [ 3][ 1] = { 255,   1,   2, +15,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 03 KP divide shuffle L. 	*/
        [ 3][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 03 TP divide shuffle R. 	*/
        [ 3][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 03 KP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
        [ 4][ 0] = {   0,   1,   2,   3, +15,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 04 TP divide shuffle L. 	*/
        [ 4][ 1] = { 255,   1,   2,   3, +15,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 04 KP divide shuffle L. 	*/
        [ 4][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 04 TP divide shuffle R. 	*/
        [ 4][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 04 KP divide shuffle R. 	*/

        [ 5][ 0] = {   0,   1,   2,   3,   4, +15,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 05 TP divide shuffle L. 	*/
        [ 5][ 1] = { 255,   1,   2,   3,   4, +15,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 05 KP divide shuffle L. 	*/
        [ 5][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 05 TP divide shuffle R. 	*/
        [ 5][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 05 KP divide shuffle R. 	*/

        [ 6][ 0] = {   0,   1,   2,   3,   4,   5, +15,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 06 TP divide shuffle L. 	*/
        [ 6][ 1] = { 255,   1,   2,   3,   4,   5, +15,   6,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 06 KP divide shuffle L. 	*/
        [ 6][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 06 TP divide shuffle R. 	*/
        [ 6][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 06 KP divide shuffle R. 	*/

        [ 7][ 0] = {   0,   1,   2,   3,   4,   5,   6, +15,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 07 TP divide shuffle L. 	*/
        [ 7][ 1] = { 255,   1,   2,   3,   4,   5,   6, +15,   7,   8,   9,  10,  11,  12,  13,  14 },  /* 07 KP divide shuffle L. 	*/
        [ 7][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 07 TP divide shuffle R. 	*/
        [ 7][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 07 KP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
        [ 8][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7, +15,   8,   9,  10,  11,  12,  13,  14 },  /* 08 TP divide shuffle L. 	*/
        [ 8][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7, +15,   8,   9,  10,  11,  12,  13,  14 },  /* 08 KP divide shuffle L. 	*/
        [ 8][ 2] = {   8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 08 TP divide shuffle R. 	*/
        [ 8][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 08 KP divide shuffle R. 	*/

        [ 9][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 09 TP divide shuffle L. 	*/
        [ 9][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 09 KP divide shuffle L. 	*/
        [ 9][ 2] = {  +8,   9,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 09 TP divide shuffle R. 	*/
        [ 9][ 3] = { 255,   9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 09 KP divide shuffle R. 	*/

        [10][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 10 TP divide shuffle L. 	*/
        [10][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 10 KP divide shuffle L. 	*/
        [10][ 2] = {   9,  +8,  10,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 10 TP divide shuffle R. 	*/
        [10][ 3] = { 255,  +9,  10,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 10 KP divide shuffle R. 	*/

        [11][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 11 TP divide shuffle L. 	*/
        [11][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 11 KP divide shuffle L. 	*/
        [11][ 2] = {   9,  10,  +8,  11,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 11 TP divide shuffle R. 	*/
        [11][ 3] = { 255,  10,  +9,  11,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 11 KP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
        [12][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 12 TP divide shuffle L. 	*/
        [12][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 12 KP divide shuffle L. 	*/
        [12][ 2] = {   9,  10,  11,  +8,  12,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 12 TP divide shuffle R. 	*/
        [12][ 3] = { 255,  10,  11,  +9,  12,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 12 KP divide shuffle R. 	*/

        [13][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 13 TP divide shuffle L. 	*/
        [13][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 13 KP divide shuffle L. 	*/
        [13][ 2] = {   9,  10,  11,  12,  +8,  13,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 13 TP divide shuffle R. 	*/
        [13][ 3] = { 255,  10,  11,  12,  +9,  13,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 13 KP divide shuffle R. 	*/

        [14][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 14 TP divide shuffle L. 	*/
        [14][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 14 KP divide shuffle L. 	*/
        [14][ 2] = {   9,  10,  11,  12,  13,  +8,  14,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 14 TP divide shuffle R. 	*/
        [14][ 3] = { 255,  10,  11,  12,  13,  +9,  14,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 14 KP divide shuffle R. 	*/

        [15][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 15 TP divide shuffle L. 	*/
        [15][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 15 KP divide shuffle L. 	*/
        [15][ 2] = {   9,  10,  11,  12,  13,  14,  +8,  15,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 15 TP divide shuffle R. 	*/
        [15][ 3] = { 255,  10,  11,  12,  13,  14,  +9,  15,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 15 KP divide shuffle R. 	*/

	           /*  0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 */
        [16][ 0] = {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 16 TP divide shuffle L. 	*/
        [16][ 1] = { 255,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },  /* 16 KP divide shuffle L. 	*/
        [16][ 2] = {   9,  10,  11,  12,  13,  14,  15,  +8,   0,   1,   2,   3,   4,   5,   6,   7 },  /* 16 TP divide shuffle R. 	*/
        [16][ 3] = { 255,  10,  11,  12,  13,  14,  15,  +9,   1,   2,   3,   4,   5,   6,   7,   8 }, 	/* 16 KP divide shuffle R. 	*/
};
